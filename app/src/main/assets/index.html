<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Bike Maintenance Tracker</title>
    <style>
        :root {
          --primary:#0d6efd;
          --danger:#d9534f;
          --muted:#6c757d;
          --card-bg:#ffffff;
          --bg:#f4f6f9;
          --text:#222;
        }
        body.dark {
          --primary:#0d6efd;
          --danger:#ff6b6b;
          --muted:#aaa;
          --card-bg:#1f1f1f;
          --bg:#121212;
          --text:#f1f1f1;
        }
        *{box-sizing:border-box;transition:background .25s,color .25s}
        body {
          margin:0;
          font-family:Inter,system-ui,Segoe UI,Roboto,Arial;
          background:var(--bg);
          color:var(--text);
          padding:20px;
        }
        header {
          max-width:1100px;
          margin:0 auto 18px;
          display:flex;
          align-items:center;
          justify-content:space-between;
          gap:12px;
        }
        h1{margin:0;font-size:20px}
        .container {
          max-width:1100px;
          margin:0 auto;
          display:grid;
          grid-template-columns:360px 1fr;
          gap:18px;
          align-items:start;
        }
        .card {
          background:var(--card-bg);
          padding:14px;
          border-radius:10px;
          box-shadow:0 6px 18px rgba(12,24,40,0.06);
        }
        label{display:block;font-size:13px;margin-top:8px;color:var(--muted)}
        input,button {
          width:100%;
          padding:8px 10px;
          margin-top:6px;
          border-radius:8px;
          border:1px solid #d6d8db;
          font-size:14px;
          background:var(--card-bg);
          color:var(--text);
        }
        button.primary{background:var(--primary);color:#fff;border:none;cursor:pointer}
        button.ghost{background:transparent;border:1px solid #ced4da;cursor:pointer;color:var(--text)}
        button.danger{background:var(--danger);color:#fff;border:none;cursor:pointer}
        .dashboard{display:grid;grid-template-rows:auto auto 1fr;gap:12px;}
        .summary-row{display:flex;gap:10px;align-items:center;justify-content:space-between;}
        .stat{flex:1;background:linear-gradient(180deg,var(--card-bg),var(--bg));padding:10px;border-radius:10px;box-shadow:0 3px 10px rgba(12,24,40,0.04);text-align:center;}
        .stat h3{margin:0;font-size:14px;color:var(--muted)}
        .stat p{margin:8px 0 0;font-size:18px;font-weight:600}
        table{width:100%;border-collapse:collapse;background:var(--card-bg);border-radius:8px;overflow:hidden;box-shadow:0 6px 18px rgba(12,24,40,0.04);}
        th,td{padding:10px;border-bottom:1px solid #eef0f2;text-align:center;font-size:13px;}
       th {
        background: var(--card-bg);
        font-size: 13px;
        color: var(--text);
        border-bottom: 1px solid #ddd;
      }

        tr.overdue{background:rgba(217,83,79,0.06)}
        .actions button{margin:0 4px;padding:6px 8px;font-size:13px;border-radius:6px}
        .controls{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
        footer{max-width:1100px;margin:18px auto 0;color:var(--muted);font-size:13px;text-align:center;}
        @media (max-width:1000px){
          .container{grid-template-columns:1fr;padding-bottom:30px}
          header{flex-direction:column;align-items:flex-start;gap:8px}
        }
    </style>
</head>
<body>

<header>
    <div>
        <h1>Bike Maintenance Tracker</h1>
        <div class="muted">Designed and developed by Viren | ¬© 2025</div>
    </div>
    <div class="controls">
        <button id="themeToggle" class="ghost">üåô Dark Mode</button>
        <button id="clearAll" class="danger">Clear All Data</button>
    </div>
</header>


<div class="container">
    <!-- LEFT -->
    <div>
        <div class="card">
            <h3 style="margin:0">Bike Information</h3>
            <label>Bike Name / Model</label>
            <input id="bikeModel" placeholder="e.g., Yamaha FZ">
            <label>Registration No.</label>
            <input id="bikeReg" placeholder="e.g., MH12 AB 1234">
            <label>Purchase Date</label>
            <input id="bikePurchase" type="date">
            <label>Current Odometer (km)</label>
            <div style="display:flex;gap:8px;margin-top:6px">
                <input id="bikeKm" type="number" min="0" style="flex:1">
                <button id="updateKm" class="primary" style="width:120px">Update KM</button>
            </div>
            <label>Default Service Interval (km)</label>
            <input id="defaultInterval" type="number" min="100" placeholder="e.g., 2000">
            <div style="display:flex;gap:8px;margin-top:10px">
                <button id="saveBike" class="primary">Save Bike Info</button>
                <button id="resetBike" class="ghost">Reset Bike Info</button>
            </div>
        </div>

        <div style="height:12px"></div>

        <div class="card">
            <h3 style="margin:0">Add Service Record</h3>
            <label>Date of Service</label>
            <input id="serviceDate" type="date">
            <label>Service Type / Notes</label>
            <input id="serviceType" placeholder="Oil change, Brake, Full service...">
            <label>Mechanic / Service Center</label>
            <input id="serviceMechanic" placeholder="Mechanic name or garage">
            <label>KM at service</label>
            <input id="serviceKm" type="number" min="0">
            <label>Cost (‚Çπ)</label>
            <input id="serviceCost" type="number" min="0">
            <label>Custom Next Service Interval (km)</label>
            <input id="serviceInterval" type="number" min="0" placeholder="Leave blank to use default">
            <div style="display:flex;gap:8px;margin-top:10px">
                <button id="addServiceBtn" class="primary">Add Service</button>
                <button id="cancelEdit" class="ghost" style="display:none">Cancel Edit</button>
            </div>
        </div>
    </div>

    <!-- RIGHT -->
    <div class="dashboard">
        <div class="card">
            <div style="display:flex;justify-content:space-between;align-items:center">
                <div>
                    <h3 style="margin:0">Status</h3>
                    <div id="bikeSummary" class="muted" style="margin-top:6px"></div>
                </div>
                <div style="text-align:right">
                    <div id="nextReminder" style="font-weight:700;color:var(--danger)"></div>
                    <div class="muted" id="nextKmText"></div>
                </div>
            </div>

            <div style="height:12px"></div>

            <div class="summary-row">
                <div class="stat"><h3>Total Spent</h3><p id="statTotal">‚Çπ0</p></div>
                <div class="stat"><h3>Avg / Service</h3><p id="statAvg">‚Çπ0</p></div>
                <div class="stat"><h3>Services</h3><p id="statCount">0</p></div>
                <div class="stat"><h3>Min / Max</h3><p id="statMinMax">‚Çπ0 / ‚Çπ0</p></div>
            </div>
        </div>

        <div style="overflow:auto">
            <table id="servicesTable">
                <thead>
                <tr>
                    <th>#</th><th>Date</th><th>Type</th><th>Mechanic</th>
                    <th>KM</th><th>Next KM</th><th>Cost (‚Çπ)</th><th>Action</th>
                </tr>
                </thead>
                <tbody id="servicesBody"></tbody>
            </table>
        </div>
    </div>
</div>

<footer>Built with ‚ù§Ô∏è & pride in India ‚Äî Virendra Khade.</footer>

<script>
    const STORAGE_KEYS = {
      BIKE:'bike_info_v1',
      SERVICES:'bike_services_v1',
      THEME:'bike_theme_v1'
    };
    let bike = JSON.parse(localStorage.getItem(STORAGE_KEYS.BIKE)) || null;
    let services = JSON.parse(localStorage.getItem(STORAGE_KEYS.SERVICES)) || [];

    const $ = id => document.getElementById(id);
    function saveBike(){localStorage.setItem(STORAGE_KEYS.BIKE, JSON.stringify(bike));}
    function saveServices(){localStorage.setItem(STORAGE_KEYS.SERVICES, JSON.stringify(services));}
    function formatNum(n){return (isNaN(n)||n===null)?0:Number(n).toLocaleString();}
    function formatRupee(n){return '‚Çπ'+(isNaN(n)?0:Number(n).toLocaleString());}
    function calcNextKm(serviceKm,interval){return Number(serviceKm)+Number(interval||0);}

    /* THEME */
    function applyTheme(theme){
      if(theme==='dark'){document.body.classList.add('dark');$('themeToggle').textContent='‚òÄÔ∏è Light Mode';}
      else{document.body.classList.remove('dark');$('themeToggle').textContent='üåô Dark Mode';}
    }
    function toggleTheme(){
      const isDark=document.body.classList.toggle('dark');
      const theme=isDark?'dark':'light';
      localStorage.setItem(STORAGE_KEYS.THEME,theme);
      applyTheme(theme);
    }
    $('themeToggle').addEventListener('click',toggleTheme);
    applyTheme(localStorage.getItem(STORAGE_KEYS.THEME)||'light');

    /* BIKE INFO */
    function populateBikeForm(){
      if(!bike){$('bikeSummary').textContent='No bike saved. Please add bike info.';return;}
      $('bikeModel').value=bike.model||'';
      $('bikeReg').value=bike.reg||'';
      $('bikePurchase').value=bike.purchaseDate||'';
      $('bikeKm').value=bike.currentKm||'';
      $('defaultInterval').value=bike.defaultInterval||'';
      updateBikeSummary();
    }
    function updateBikeSummary(){
      if(!bike)return;
      $('bikeSummary').textContent=`${bike.model||'-'} ‚Ä¢ ${bike.reg||'-'} ‚Ä¢ ${formatNum(bike.currentKm)} km ‚Ä¢ Interval: ${formatNum(bike.defaultInterval)} km`;
    }

    /* SERVICE ADD/EDIT */
    let editingIndex=-1;
    $('saveBike').addEventListener('click',()=>{
      bike={
        model:$('bikeModel').value.trim(),
        reg:$('bikeReg').value.trim(),
        purchaseDate:$('bikePurchase').value,
        currentKm:Number($('bikeKm').value||0),
        defaultInterval:Number($('defaultInterval').value||2000)
      };
      saveBike();updateBikeSummary();renderAll();
    });
    $('updateKm').addEventListener('click',()=>{
      if(!bike){alert('Save bike info first.');return;}
      bike.currentKm=Number($('bikeKm').value||0);
      saveBike();renderAll();
    });
    $('addServiceBtn').addEventListener('click',()=>{
      const date=$('serviceDate').value,type=$('serviceType').value.trim(),mech=$('serviceMechanic').value.trim(),
            km=Number($('serviceKm').value||0),cost=Number($('serviceCost').value||0),
            customInterval=Number($('serviceInterval').value||0);
      if(!date||!type||!km){alert('Please fill date, type and KM.');return;}
      if(!bike){alert('Save bike info first.');return;}
      const interval=(customInterval>0)?customInterval:bike.defaultInterval;
      const nextKm=calcNextKm(km,interval);
      const record={date,type,mechanic:mech,km,cost,interval,nextKm,createdAt:new Date().toISOString()};
      if(editingIndex>=0){services[editingIndex]=record;editingIndex=-1;$('cancelEdit').style.display='none';$('addServiceBtn').textContent='Add Service';}
      else services.push(record);
      services.sort((a,b)=>a.km-b.km);saveServices();clearServiceForm();renderAll();
    });
    $('cancelEdit').addEventListener('click',()=>{editingIndex=-1;clearServiceForm();$('cancelEdit').style.display='none';$('addServiceBtn').textContent='Add Service';});

    /* TABLE + SUMMARY */
    function renderTable(){
      const body=$('servicesBody');body.innerHTML='';
      if(!services.length){body.innerHTML='<tr><td colspan="8" class="muted">No service records yet.</td></tr>';return;}
      services.forEach((s,i)=>{
        const overdue=bike && bike.currentKm>=s.nextKm;
        body.innerHTML+=`
        <tr class="${overdue?'overdue':''}">
          <td>${i+1}</td><td>${s.date}</td><td>${s.type}</td><td>${s.mechanic||'-'}</td>
          <td>${formatNum(s.km)}</td><td>${formatNum(s.nextKm)}</td><td>${formatNum(s.cost)}</td>
         <td>
  <button class='ghost' onclick='editRecord(${i})'>Edit</button>
  <button class='danger' onclick='deleteRecord(${i})'>Delete</button>
</td>

        </tr>`;
      });
    }
    function clearServiceForm(){['serviceDate','serviceType','serviceMechanic','serviceKm','serviceCost','serviceInterval'].forEach(id=>$(''+id).value='');}
    function editRecord(i){const s=services[i];$('serviceDate').value=s.date;$('serviceType').value=s.type;$('serviceMechanic').value=s.mechanic;$('serviceKm').value=s.km;$('serviceCost').value=s.cost;$('serviceInterval').value=s.interval;editingIndex=i;$('cancelEdit').style.display='inline-block';$('addServiceBtn').textContent='Save Changes';window.scrollTo({top:0,behavior:'smooth'});}


    function computeSummary(){
      const total=services.reduce((s,r)=>s+r.cost,0);
      const count=services.length;
      const avg=count?(total/count):0;
      const costs=services.map(s=>s.cost);
      $('statTotal').textContent=formatRupee(total);
      $('statAvg').textContent=formatRupee(avg.toFixed(2));
      $('statCount').textContent=count;
      $('statMinMax').textContent=`${formatRupee(Math.min(...costs)||0)} / ${formatRupee(Math.max(...costs)||0)}`;
    }

    function computeReminder(){
      if(!bike||!services.length){$('nextReminder').textContent='';$('nextKmText').textContent='';return;}
      const currentKm=bike.currentKm;
      const upcoming=services.map(s=>s.nextKm).filter(n=>n>currentKm).sort((a,b)=>a-b);
      if(!upcoming.length){
        const maxNext=Math.max(...services.map(s=>s.nextKm));
        $('nextReminder').textContent=`‚ö†Ô∏è Overdue by ${formatNum(currentKm-maxNext)} km`;
        $('nextKmText').textContent=`Last target: ${formatNum(maxNext)} km`;
        return;
      }
      const nextKm=upcoming[0],diff=nextKm-currentKm;
      $('nextReminder').textContent=diff<=0?'‚ö†Ô∏è Overdue!':diff<=200?`‚ö†Ô∏è Due soon (${formatNum(diff)} km left)`:'';
      $('nextKmText').textContent=`Next service target: ${formatNum(nextKm)} km ‚Ä¢ Current: ${formatNum(currentKm)} km`;
    }

    /* EXPORT + CLEAR */



/* EXPORT + CLEAR */

function deleteRecord(i) {
  if (confirm("Are you sure you want to delete this record?")) {
    services.splice(i, 1); // remove the record at index i
    saveServices();        // update local storage
    renderAll();           // re-render table and stats
    alert("‚úÖ Service record deleted successfully!");
  }
}


 /* EXPORT + CLEAR */
function clearAllData() {
  if (confirm('‚ö†Ô∏è This will delete all stored data ‚Äî bike info and services. Continue?')) {
    localStorage.removeItem(STORAGE_KEYS.BIKE);
    localStorage.removeItem(STORAGE_KEYS.SERVICES);
    bike = null;
    services = [];
    ['bikeModel','bikeReg','bikePurchase','bikeKm','defaultInterval'].forEach(id => $(id).value = '');
    $('bikeSummary').textContent = 'No bike saved. Please add bike info.';
    $('servicesBody').innerHTML = '<tr><td colspan="8" class="muted">No service records yet.</td></tr>';
    $('statTotal').textContent = '‚Çπ0';
    $('statAvg').textContent = '‚Çπ0';
    $('statCount').textContent = '0';
    $('statMinMax').textContent = '‚Çπ0 / ‚Çπ0';
    $('nextReminder').textContent = '';
    $('nextKmText').textContent = '';
    alert('‚úÖ All data cleared successfully!');
  }
}

function resetBikeInfo() {
  if (confirm("Are you sure you want to reset your bike information?")) {
    localStorage.removeItem(STORAGE_KEYS.BIKE);
    bike = null;
    ['bikeModel', 'bikeReg', 'bikePurchase', 'bikeKm', 'defaultInterval'].forEach(id => $(id).value = '');
    $('bikeSummary').textContent = 'No bike saved. Please add bike info.';
    renderAll();
    alert("‚úÖ Bike information has been reset successfully!");
  }
}

function renderAll() {
  populateBikeForm();
  renderTable();
  computeSummary();
  computeReminder();
}

/* EVENT LISTENERS */
$('clearAll').addEventListener('click', clearAllData);
$('resetBike').addEventListener('click', resetBikeInfo);

renderAll();




</script>
</body>
</html>
